"use strict";(self.webpackChunkEleccionesFront=self.webpackChunkEleccionesFront||[]).push([[232],{3232:(At,Y,d)=>{d.r(Y),d.d(Y,{SetupEleccionModule:()=>Ot});var h=d(6814),S=d(1896),e=d(5879),g=d(9986),k=d(1088),R=d(7398),B=d(940),$=d(1139),j=d(1274),C=d(617),p=d(2296),U=d(2651),q=d(1919),F=d(3305);function I(o,a){if(1&o&&(e.TgZ(0,"div")(1,"span"),e._uU(2),e.ALo(3,"async"),e.qZA()()),2&o){const t=e.oxw();let n;e.xp6(2),e.hij(" Setup - ",null==(n=e.lcZ(3,1,t.setupService.eleccionOb$))?null:n.nombre,"")}}let z=(()=>{class o{constructor(t,n,i){this.breakpointObserver=t,this.setupService=n,this.functionCallingService=i,this.isHandset$=this.breakpointObserver.observe(k.u3.Handset).pipe((0,R.U)(l=>l.matches),(0,B.d)()),this.funciones=[{name:"expandir_contraer_ABM",description:"Expande o contrae el menu de ABM",parameters:{type:"object",properties:{toogle:{type:"boolean",description:"El valor con el que se contrae o expande el menu"}}}}],this.functionCallingService.addFunctions(this.funciones)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.Yg),e.Y36(g.U),e.Y36($.V))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sidebar-setup"]],decls:41,vars:12,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],[1,"mat-elevation-z0"],["mat-list-item","","routerLink","/setup-elecccion/mesa-electoral"],["mat-list-item","","routerLink","/setup-elecccion/fiscales-mesas"],["mat-list-item","","routerLink","/setup-elecccion/fiscales-generales"],["mat-list-item","","routerLink","/setup-elecccion/listas"],[1,"app-nav-accordion"],["mat-list-item",""],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],[1,"example-spacer"],[4,"ngIf"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.TgZ(6,"mat-toolbar"),e._uU(7,"Setup Elecciones"),e.qZA(),e.TgZ(8,"mat-accordion")(9,"mat-expansion-panel",3)(10,"mat-expansion-panel-header")(11,"mat-panel-title"),e._uU(12,"Seccion de Configuracion"),e.qZA()(),e.TgZ(13,"mat-nav-list")(14,"a",4),e._uU(15,"Configurar Mesas Electorales"),e.qZA(),e.TgZ(16,"a",5),e._uU(17,"Configurar Fiscales de Mesas"),e.qZA(),e.TgZ(18,"a",6),e._uU(19,"Configurar Fiscales Generales"),e.qZA(),e.TgZ(20,"a",7),e._uU(21,"Configurar Listas Electorales"),e.qZA()()()(),e.TgZ(22,"mat-accordion",8)(23,"mat-expansion-panel",3)(24,"mat-expansion-panel-header")(25,"mat-panel-title"),e._uU(26,"Consultas de Configuracion"),e.qZA()(),e.TgZ(27,"mat-nav-list")(28,"a",9),e._uU(29,"Item Three"),e.qZA(),e.TgZ(30,"a",9),e._uU(31,"Item Four"),e.qZA()()()()(),e.TgZ(32,"mat-sidenav-content")(33,"mat-toolbar",10)(34,"button",11),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(2);return e.KtG(r.toggle())}),e.TgZ(35,"mat-icon",12),e._uU(36,"menu"),e.qZA()(),e._UZ(37,"span",13),e.YNc(38,I,4,3,"div",14),e.ALo(39,"async"),e.qZA(),e._UZ(40,"router-outlet"),e.qZA()()}2&t&&(e.xp6(1),e.Q6J("mode",e.lcZ(4,6,n.isHandset$)?"over":"side")("opened",!1===e.lcZ(5,8,n.isHandset$)),e.uIk("role",e.lcZ(3,4,n.isHandset$)?"dialog":"navigation"),e.xp6(37),e.Q6J("ngIf",e.lcZ(39,10,n.setupService.eleccionOb$)))},dependencies:[h.O5,S.lC,S.rH,j.Ye,C.Hw,p.RK,U.JX,U.TM,U.Rh,q.Hk,q.Tg,F.pp,F.ib,F.yz,F.yK,h.Ov]}),o})(),K=(()=>{class o{constructor(t){this.setupService=t,this.e=null,this.setupService.eleccionOb$.subscribe(n=>this.e=n)}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.U))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-layout"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"app-sidebar-setup")},dependencies:[z]}),o})();var X=d(8209),x=d(2061);class W extends x.e{constructor(){super()}get endPoint(){return"fiscalesdemesas"}getFilterText(){return`${this.Companero.nombre} ${this.MesaElectoral.numeroMesa.toString()}`}}var c=d(6223),m=d(7700),P=d(4763),T=d(5573),f=d(4170),v=d(2032),s=d(5313);function V(o,a){1&o&&(e.TgZ(0,"th",15),e._uU(1,"Nombre"),e.qZA())}function ee(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectCompanero(l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.nombre)}}function te(o,a){1&o&&(e.TgZ(0,"th",15),e._uU(1,"Apellido"),e.qZA())}function oe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectCompanero(l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.apellido)}}function ne(o,a){1&o&&(e.TgZ(0,"th",15),e._uU(1,"DNI"),e.qZA())}function ae(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectCompanero(l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.dni)}}function ie(o,a){1&o&&(e.TgZ(0,"th",15),e._uU(1,"Telefono"),e.qZA())}function le(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectCompanero(l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.tel)}}function se(o,a){1&o&&e._UZ(0,"tr",17)}function re(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr",18),e.NdJ("dblclick",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectAndClose(l))}),e.qZA()}if(2&o){const t=a.$implicit,n=e.oxw();e.ekj("selected",n.isSelected(t))}}let D=(()=>{class o{constructor(t,n){this.dialogRef=t,this.companeroService=n,this.companeros=[],this.companerosFiltrados=this.companeros,this.displayedColumns=["nombre","apellido","dni","tel"],this._filterText="",this.selectedCompanero=void 0}ngOnInit(){this.loadData()}loadData(){const t=new P.Q;this.companeroService.getAllEntity(t).subscribe(n=>{this.companeros=n.map(i=>Object.assign(new P.Q,i)),this.companerosFiltrados=this.companeros})}applyFilter(t){this.companerosFiltrados=x.e.Filtrar(this.companeros,t)}selectCompanero(t){this.selectedCompanero=t}selectAndClose(t){this.selectedCompanero=t,this.dialogRef.close(t)}isSelected(t){return this.selectedCompanero===t}get filterText(){return this._filterText}set filterText(t){this._filterText=t,console.log("Nuevo valor de filterText:",t),this.applyFilter(t)}cancel(){this.selectedCompanero=void 0,this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.so),e.Y36(T.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-select-companero-modal"]],decls:25,vars:5,consts:[["mat-dialog-title",""],[1,"full-width"],["matInput","","placeholder","Filtrar Compa\xf1ero",3,"ngModel","ngModelChange"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","apellido"],["matColumnDef","dni"],["matColumnDef","tel"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","dblclick",4,"matRowDef","matRowDefColumns"],[1,"button-container"],["mat-button","",1,"btn-guardar",3,"mat-dialog-close"],["mat-button","",1,"btn-cerrar",3,"click"],["mat-header-cell",""],["mat-cell","",3,"click"],["mat-header-row",""],["mat-row","",3,"dblclick"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Seleccionar Compa\xf1ero"),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"input",2),e.NdJ("ngModelChange",function(l){return n.filterText=l}),e.qZA()(),e.TgZ(5,"table",3),e.ynx(6,4),e.YNc(7,V,2,0,"th",5),e.YNc(8,ee,2,1,"td",6),e.BQk(),e.ynx(9,7),e.YNc(10,te,2,0,"th",5),e.YNc(11,oe,2,1,"td",6),e.BQk(),e.ynx(12,8),e.YNc(13,ne,2,0,"th",5),e.YNc(14,ae,2,1,"td",6),e.BQk(),e.ynx(15,9),e.YNc(16,ie,2,0,"th",5),e.YNc(17,le,2,1,"td",6),e.BQk(),e.YNc(18,se,1,0,"tr",10),e.YNc(19,re,1,2,"tr",11),e.qZA()(),e.TgZ(20,"mat-dialog-actions",12)(21,"button",13),e._uU(22,"Seleccionar"),e.qZA(),e.TgZ(23,"button",14),e.NdJ("click",function(){return n.cancel()}),e._uU(24,"Cancelar"),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngModel",n.filterText),e.xp6(1),e.Q6J("dataSource",n.companerosFiltrados),e.xp6(13),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(2),e.Q6J("mat-dialog-close",n.selectedCompanero))},dependencies:[p.lW,m.ZT,m.uh,m.xY,m.H8,f.KE,v.Nt,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,c.Fj,c.JJ,c.On],styles:["tr.selected[_ngcontent-%COMP%]{background-color:#9ee29b}.full-width[_ngcontent-%COMP%]{width:100%}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;width:150px}.btn-cerrar[_ngcontent-%COMP%]{background-color:#e91e63;color:#fff}.button-container[_ngcontent-%COMP%]   button.btn-guardar[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}"]}),o})();var O=d(5136),ce=d(3519),u=d.n(ce),b=d(9862),J=d(7033);let A=(()=>{class o{constructor(t,n,i){this.Urls=t,this.http=n,this.setupService=i,this.eleccion=null,this.url=this.Urls.apiUrl,this.setupService.eleccionOb$.subscribe(l=>{this.eleccion=l})}getHttpHeaders(){return new b.WM({"Content-Type":"application/json",Accept:"application/json"})}getAllFiscalesMesas(){const t=this.url+"fiscalesdemesas";let n={headers:this.getHttpHeaders()};return this.http.get(t,n)}setFiscalMesa(t,n){const i=this.url+"fiscalesdemesas",l={mesa_id:n,companero_id:t};let r={headers:this.getHttpHeaders()};return this.http.post(i,l,r)}deleteFiscalMesa(t,n){const i=this.url+`fiscalesdemesas/${n}/${t}`;let r={headers:this.getHttpHeaders()};return this.http.delete(i,r)}getAllFiscalGenerales(){const t=this.url+"fiscalesgenerales/obtenerPorEleccion";let n=0;this.eleccion&&(n=this.eleccion.id);const i=(new b.LE).set("eleccion_id",n),l={headers:this.getHttpHeaders(),params:i};return this.http.get(t,l)}setFiscalGeneral(t){const n=this.url+"fiscalesgenerales",{id:i,...l}=t;let r={headers:this.getHttpHeaders()};return this.http.post(n,l,r)}deleteFiscalGeneral(t){const n=this.url+`${t.endPoint}`,i=t.companero_id,l=t.escuela_id,r=t.eleccion_id,M=(new b.LE).set("eleccion_id",r).set("escuela_id",l).set("companero_id",i),_={headers:this.getHttpHeaders(),params:M};return this.http.delete(n,_)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(J.Y),e.LFG(b.eN),e.LFG(g.U))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var E=d(8525),w=d(3680);function de(o,a){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre," ")}}function me(o,a){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.numeroMesa)}}function pe(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"La escuela es requerida"),e.qZA())}function ue(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"El compa\xf1ero es requerido"),e.qZA())}let fe=(()=>{class o{constructor(t,n,i,l,r,M,_){this.dialog=t,this.setupService=n,this.dialogRef=i,this.formBuilder=l,this.fiscalService=r,this.abmService=M,this.data=_,this.isUpdate=!1,this.escuelas=[],this.eleccion=null,this.mesasDeEscuela=[],this.companeroSeleccionado=void 0,this.fiscal=_.fiscal}ngOnInit(){this.loadData(),this.form=this.formBuilder.group({mesa_id:["",c.kI.required],companero_id:["",c.kI.required]}),this.fiscal&&(this.isUpdate=!0,this.form.get("mesa_id")?.setValue(this.fiscal.mesa_id),this.form.get("companero_id")?.setValue(this.fiscal.companero_id))}loadData(){const t=new O.T;this.abmService.getAllEntity(t).subscribe(n=>{this.escuelas=n.map(i=>Object.assign(new O.T,i))}),this.setupService.eleccionOb$.subscribe(n=>{this.eleccion=n})}set escuelaElegida(t){this._escuelaElegida=t,t?this.loadMesas(t):this.mesasDeEscuela=[]}loadMesas(t){this.setupService.getMesasByEscuela(t).subscribe(n=>{this.mesasDeEscuela=n})}openSelectCompaneroModal(t){t.stopPropagation(),t.preventDefault(),this.dialog.open(D).afterClosed().subscribe(i=>{i&&(console.log(i),this.companeroSeleccionado=i,this.form.get("companero_id")?.setValue(i.id))})}setFiscal(){const t=this.form.get("companero_id")?.value,n=this.form.get("mesa_id")?.value;this.fiscalService.setFiscalMesa(t,n).subscribe(i=>{u().fire({icon:"success",title:"Configuracion exitosa",text:"Se genero un nuevo Fical de Mesa"})})}closeModal(t){t.stopPropagation(),t.preventDefault(),this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.uw),e.Y36(g.U),e.Y36(m.so),e.Y36(c.qu),e.Y36(A),e.Y36(T.I),e.Y36(m.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fiscal-mesa-modal"]],decls:29,vars:11,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-column"],["appearance","fill",1,"select-field"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","mesa_id",3,"ngModel","ngModelChange"],[4,"ngIf"],["appearance","fill",1,"input-field"],["matInput","","placeholder","Compa\xf1ero",3,"readonly","value"],["mat-icon-button","","matSuffix","",3,"click"],[1,"button-container"],["mat-raised-button","","type","submit",1,"btn-guardar",3,"disabled"],["mat-button","",1,"btn-cerrar",3,"click"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return n.setFiscal()}),e.TgZ(4,"div",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),e._uU(8,"Seleccionar escuela"),e.qZA(),e.TgZ(9,"mat-select",5),e.NdJ("valueChange",function(l){return n.escuelaElegida=l}),e.YNc(10,de,2,2,"mat-option",6),e.qZA()()(),e.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"Mesa Electoral"),e.qZA(),e.TgZ(15,"mat-select",7),e.NdJ("ngModelChange",function(l){return n.form.value.mesa_id=l}),e.YNc(16,me,2,2,"mat-option",6),e.qZA(),e.YNc(17,pe,2,0,"mat-error",8),e.qZA()()(),e.TgZ(18,"mat-form-field",9),e._UZ(19,"input",10),e.TgZ(20,"button",11),e.NdJ("click",function(l){return n.openSelectCompaneroModal(l)}),e.TgZ(21,"mat-icon"),e._uU(22,"search"),e.qZA()(),e.YNc(23,ue,2,0,"mat-error",8),e.qZA(),e.TgZ(24,"div",12)(25,"button",13),e._uU(26,"Guardar"),e.qZA(),e.TgZ(27,"button",14),e.NdJ("click",function(l){return n.closeModal(l)}),e._uU(28,"Cerrar"),e.qZA()()()()),2&t&&(e.xp6(2),e.Oqu(n.isUpdate?"Actualizar Mesa":"Agregar Mesa"),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("value",n.escuelaElegida),e.xp6(1),e.Q6J("ngForOf",n.escuelas),e.xp6(5),e.Q6J("ngModel",n.form.value.mesa_id),e.xp6(1),e.Q6J("ngForOf",n.mesasDeEscuela),e.xp6(1),e.Q6J("ngIf",n.form.controls.mesa_id.hasError("required")),e.xp6(2),e.Q6J("readonly",!0)("value",null==n.companeroSeleccionado?null:n.companeroSeleccionado.nombre),e.xp6(4),e.Q6J("ngIf",n.form.controls.companero_id.hasError("required")),e.xp6(2),e.Q6J("disabled",n.form.invalid))},dependencies:[h.sg,h.O5,C.Hw,p.lW,p.RK,m.xY,f.KE,f.hX,f.TO,f.R9,v.Nt,E.gD,w.ey,c._Y,c.JJ,c.JL,c.sg,c.u],styles:[".form-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.form-column[_ngcontent-%COMP%]{flex:1;margin-right:10px}.select-field[_ngcontent-%COMP%]{width:100%}.input-field[_ngcontent-%COMP%]{width:98%;margin-top:10px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;width:150px}.btn-cerrar[_ngcontent-%COMP%]{background-color:#e91e63;color:#fff}.button-container[_ngcontent-%COMP%]   button.btn-guardar[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}"]}),o})();var Z=d(3365);function ge(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Escuela "),e.qZA())}function _e(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.MesaElectoral.Escuela.nombre," ")}}function he(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Numero de Mesa "),e.qZA())}function Ce(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.MesaElectoral.numeroMesa," ")}}function be(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Eleccion "),e.qZA())}function Me(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.MesaElectoral.Eleccion.nombre," ")}}function Te(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Apellido y Nombre "),e.qZA())}function Ze(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.AsE("",t.Companero.apellido,", ",t.Companero.nombre," ")}}function xe(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1,"Telefono "),e.qZA())}function ve(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.Companero.tel," ")}}function Se(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Acciones "),e.qZA())}function Fe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",14)(1,"button",15),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.borrarFiscalMesa(l))}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()()}}function Oe(o,a){1&o&&e._UZ(0,"tr",16)}function Ae(o,a){1&o&&e._UZ(0,"tr",17)}const ye=function(){return[5,10,25]};let Ue=(()=>{class o{constructor(t,n,i){this.setupService=t,this.fiscalService=n,this.dialog=i,this.fiscalesMesas=[],this.displayedColumns=["escuela","mesa","eleccion","nombre","telefono","acciones"]}ngOnInit(){this.loadData()}loadData(){this.fiscalService.getAllFiscalesMesas().subscribe(t=>{this.fiscalesMesas=t.map(n=>Object.assign(new W,n)),this.dataSource=new s.by(this.fiscalesMesas),this.dataSource.paginator=this.paginator})}abrirModalAgregar(){this.dialog.open(fe,{data:{mesa:void 0},width:"500px",panelClass:"custom-modal-background"}).afterClosed().subscribe(n=>{console.log("El modal se cerr\xf3"),this.loadData()})}borrarFiscalMesa(t){u().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, borrar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.fiscalService.deleteFiscalMesa(t.companero_id,t.mesa_id).subscribe(i=>{u().fire({icon:"success",title:"Escuela borrada",text:"La mesa  ha sido borrada exitosamente"}),this.loadData()},i=>{u().fire({icon:"error",title:"Error al borrar escuela",text:"Ha ocurrido un error al borrar la mesa"}),console.log(i)})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.U),e.Y36(A),e.Y36(m.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fiscales-mesas"]],viewQuery:function(t,n){if(1&t&&e.Gf(Z.NW,5),2&t){let i;e.iGM(i=e.CRH())&&(n.paginator=i.first)}},decls:25,vars:6,consts:[["mat-fab","","color","primary",1,"floating-button",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","escuela"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","mesa"],["matColumnDef","eleccion"],["matColumnDef","nombre"],["matColumnDef","telefono"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator-left",3,"pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return n.abrirModalAgregar()}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()(),e.TgZ(3,"table",1),e.ynx(4,2),e.YNc(5,ge,2,0,"th",3),e.YNc(6,_e,2,1,"td",4),e.BQk(),e.ynx(7,5),e.YNc(8,he,2,0,"th",3),e.YNc(9,Ce,2,1,"td",4),e.BQk(),e.ynx(10,6),e.YNc(11,be,2,0,"th",3),e.YNc(12,Me,2,1,"td",4),e.BQk(),e.ynx(13,7),e.YNc(14,Te,2,0,"th",3),e.YNc(15,Ze,2,2,"td",4),e.BQk(),e.ynx(16,8),e.YNc(17,xe,2,0,"th",3),e.YNc(18,ve,2,1,"td",4),e.BQk(),e.ynx(19,9),e.YNc(20,Se,2,0,"th",3),e.YNc(21,Fe,4,0,"td",4),e.BQk(),e.YNc(22,Oe,1,0,"tr",10),e.YNc(23,Ae,1,0,"tr",11),e.qZA(),e._UZ(24,"mat-paginator",12)),2&t&&(e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSize",10)("pageSizeOptions",e.DdM(5,ye)))},dependencies:[C.Hw,p.RK,p.cs,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,Z.NW],styles:[".custom-modal-background[_ngcontent-%COMP%]{background-color:#1a237e;background-image:linear-gradient(to bottom,#1a237e,#3949ab)}.floating-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;border-radius:50%;background-color:#4caf50;color:#fff}.floating-button[_ngcontent-%COMP%]:hover{background-color:#52e85a}.mat-paginator[_ngcontent-%COMP%]{justify-content:flex-start}.mat-paginator[_ngcontent-%COMP%]   .mat-paginator-navigation[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%], .mat-paginator[_ngcontent-%COMP%]   .mat-paginator-page-size[_ngcontent-%COMP%]{margin-right:10px}.paginator-left[_ngcontent-%COMP%]   .mat-paginator-range-label[_ngcontent-%COMP%], .paginator-left[_ngcontent-%COMP%]   .mat-paginator-navigation[_ngcontent-%COMP%]{justify-content:flex-start}"]}),o})();class N extends x.e{get endPoint(){return"fiscalesgenerales"}getFilterText(){throw new Error("Method not implemented.")}constructor(){super()}}function Ee(o,a){if(1&o&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function we(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"El compa\xf1ero es requerido"),e.qZA())}let Ne=(()=>{class o{constructor(t,n,i,l,r,M,_){this.dialog=t,this.setupService=n,this.dialogRef=i,this.formBuilder=l,this.fiscalService=r,this.abmService=M,this.data=_,this.isUpdate=!1,this.escuelas=[],this.eleccion=null,this.companeroSeleccionado=void 0,this.fiscal=_.fiscal}ngOnInit(){this.loadData(),this.form=this.formBuilder.group({escuela_id:["",c.kI.required],companero_id:["",c.kI.required]}),this.setupService.eleccionOb$.subscribe(t=>{this.eleccion=t}),this.fiscal&&(this.isUpdate=!0,this.form.get("escuela_id")?.setValue(this.fiscal.escuela_id),this.form.get("companero_id")?.setValue(this.fiscal.companero_id))}loadData(){const t=new O.T;this.abmService.getAllEntity(t).subscribe(n=>{this.escuelas=n.map(i=>Object.assign(new O.T,i))}),this.setupService.eleccionOb$.subscribe(n=>{this.eleccion=n})}openSelectCompaneroModal(t){t.stopPropagation(),t.preventDefault(),this.dialog.open(D).afterClosed().subscribe(i=>{i&&(console.log(i),this.companeroSeleccionado=i,this.form.get("companero_id")?.setValue(i.id))})}set escuelaElegida(t){this._escuelaElegida=t}setFiscal(){this.form.get("companero_id"),this.form.get("mesa_id");let i=new N;i=Object.assign(new N,this.form.value),i.eleccion_id=this.eleccion?.id?this.eleccion.id:0,this.fiscalService.setFiscalGeneral(i).subscribe(l=>{l.errors?u().fire({icon:"error",title:"Oops...",text:l.errors[0].message}):u().fire({icon:"success",title:"Configuracion exitosa",text:"Se genero un nuevo Fical de Mesa"}).then(()=>{this.dialogRef.close()})})}closeModal(t){t.stopPropagation(),t.preventDefault(),this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.uw),e.Y36(g.U),e.Y36(m.so),e.Y36(c.qu),e.Y36(A),e.Y36(T.I),e.Y36(m.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fiscal-general-modal"]],decls:22,vars:8,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-column"],["appearance","fill",1,"select-field"],["formControlName","escuela_id",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",1,"input-field"],["matInput","","placeholder","Compa\xf1ero",3,"readonly","value"],["mat-icon-button","","matSuffix","",3,"click"],[4,"ngIf"],[1,"button-container"],["mat-raised-button","","type","submit",1,"btn-guardar",3,"disabled"],["mat-button","",1,"btn-cerrar",3,"click"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return n.setFiscal()}),e.TgZ(4,"div",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),e._uU(8,"Seleccionar escuela"),e.qZA(),e.TgZ(9,"mat-select",5),e.NdJ("ngModelChange",function(l){return n.form.value.escuela_id=l}),e.YNc(10,Ee,2,2,"mat-option",6),e.qZA()()()(),e.TgZ(11,"mat-form-field",7),e._UZ(12,"input",8),e.TgZ(13,"button",9),e.NdJ("click",function(l){return n.openSelectCompaneroModal(l)}),e.TgZ(14,"mat-icon"),e._uU(15,"search"),e.qZA()(),e.YNc(16,we,2,0,"mat-error",10),e.qZA(),e.TgZ(17,"div",11)(18,"button",12),e._uU(19,"Guardar"),e.qZA(),e.TgZ(20,"button",13),e.NdJ("click",function(l){return n.closeModal(l)}),e._uU(21,"Cerrar"),e.qZA()()()()),2&t&&(e.xp6(2),e.Oqu(n.isUpdate?"Actualizar Fiscal General":"Agregar Fiscal General"),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("ngModel",n.form.value.escuela_id),e.xp6(1),e.Q6J("ngForOf",n.escuelas),e.xp6(2),e.Q6J("readonly",!0)("value",null==n.companeroSeleccionado?null:n.companeroSeleccionado.nombre),e.xp6(4),e.Q6J("ngIf",n.form.controls.companero_id.hasError("required")),e.xp6(2),e.Q6J("disabled",n.form.invalid))},dependencies:[h.sg,h.O5,C.Hw,p.lW,p.RK,m.xY,f.KE,f.hX,f.TO,f.R9,v.Nt,E.gD,w.ey,c._Y,c.JJ,c.JL,c.sg,c.u],styles:[".form-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.form-column[_ngcontent-%COMP%]{flex:1;margin-right:10px}.select-field[_ngcontent-%COMP%]{width:100%}.input-field[_ngcontent-%COMP%]{width:98%;margin-top:10px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;width:150px}.btn-cerrar[_ngcontent-%COMP%]{background-color:#e91e63;color:#fff}.button-container[_ngcontent-%COMP%]   button.btn-guardar[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}"]}),o})();function Ye(o,a){1&o&&(e.TgZ(0,"th",12),e._uU(1," Escuela "),e.qZA())}function ke(o,a){if(1&o&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.Escuela.nombre," ")}}function qe(o,a){1&o&&(e.TgZ(0,"th",12),e._uU(1," Eleccion "),e.qZA())}function Pe(o,a){if(1&o&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.Eleccion.nombre," ")}}function De(o,a){1&o&&(e.TgZ(0,"th",12),e._uU(1," Apellido y Nombre "),e.qZA())}function Je(o,a){if(1&o&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.AsE("",t.Companero.apellido,", ",t.Companero.nombre," ")}}function Qe(o,a){1&o&&(e.TgZ(0,"th",12),e._uU(1,"Telefono "),e.qZA())}function Ge(o,a){if(1&o&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.Companero.tel," ")}}function Le(o,a){1&o&&(e.TgZ(0,"th",12),e._uU(1," Acciones "),e.qZA())}function He(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",13)(1,"button",14),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.borrarFiscalGeneral(l))}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()()}}function Re(o,a){1&o&&e._UZ(0,"tr",15)}function Be(o,a){1&o&&e._UZ(0,"tr",16)}const $e=function(){return[5,10,25]};let je=(()=>{class o{constructor(t,n,i){this.setupService=t,this.fiscalService=n,this.dialog=i,this.fiscalGeneral=[],this.displayedColumns=["escuela","eleccion","nombre","telefono","acciones"]}ngOnInit(){this.loadData()}loadData(){this.fiscalService.getAllFiscalGenerales().subscribe(t=>{this.fiscalGeneral=t.map(n=>Object.assign(new N,n)),this.dataSource=new s.by(this.fiscalGeneral),this.dataSource.paginator=this.paginator})}abrirModalAgregar(){this.dialog.open(Ne,{data:{mesa:void 0},width:"500px",panelClass:"custom-modal-background"}).afterClosed().subscribe(n=>{console.log("El modal se cerr\xf3"),this.loadData()})}borrarFiscalGeneral(t){u().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, borrar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.fiscalService.deleteFiscalGeneral(t).subscribe(i=>{u().fire({icon:"success",title:"Fiscal General borrado",text:"El Fiscal General ha sido borrado correctamente"}),this.loadData()},i=>{u().fire({icon:"error",title:"Error al borrar escuela",text:"Ha ocurrido un error al borrar el fiscal general"}),console.log(i)})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.U),e.Y36(A),e.Y36(m.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fiscales-generales"]],viewQuery:function(t,n){if(1&t&&e.Gf(Z.NW,5),2&t){let i;e.iGM(i=e.CRH())&&(n.paginator=i.first)}},decls:23,vars:6,consts:[["mat-fab","","color","primary",1,"floating-button",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","escuela"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","eleccion"],["matColumnDef","nombre"],["matColumnDef","telefono"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator-left",3,"pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return n.abrirModalAgregar()}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()(),e.TgZ(3,"table",1),e._uU(4,"x "),e.ynx(5,2),e.YNc(6,Ye,2,0,"th",3),e.YNc(7,ke,2,1,"td",4),e.BQk(),e.ynx(8,5),e.YNc(9,qe,2,0,"th",3),e.YNc(10,Pe,2,1,"td",4),e.BQk(),e.ynx(11,6),e.YNc(12,De,2,0,"th",3),e.YNc(13,Je,2,2,"td",4),e.BQk(),e.ynx(14,7),e.YNc(15,Qe,2,0,"th",3),e.YNc(16,Ge,2,1,"td",4),e.BQk(),e.ynx(17,8),e.YNc(18,Le,2,0,"th",3),e.YNc(19,He,4,0,"td",4),e.BQk(),e.YNc(20,Re,1,0,"tr",9),e.YNc(21,Be,1,0,"tr",10),e.qZA(),e._UZ(22,"mat-paginator",11)),2&t&&(e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(17),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSize",10)("pageSizeOptions",e.DdM(5,$e)))},dependencies:[C.Hw,p.RK,p.cs,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,Z.NW],styles:[".custom-modal-background[_ngcontent-%COMP%]{background-color:#1a237e;background-image:linear-gradient(to bottom,#1a237e,#3949ab)}.floating-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;border-radius:50%;background-color:#4caf50;color:#fff}.floating-button[_ngcontent-%COMP%]:hover{background-color:#52e85a}.mat-paginator[_ngcontent-%COMP%]{justify-content:flex-start}.mat-paginator[_ngcontent-%COMP%]   .mat-paginator-navigation[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%], .mat-paginator[_ngcontent-%COMP%]   .mat-paginator-page-size[_ngcontent-%COMP%]{margin-right:10px}.paginator-left[_ngcontent-%COMP%]   .mat-paginator-range-label[_ngcontent-%COMP%], .paginator-left[_ngcontent-%COMP%]   .mat-paginator-navigation[_ngcontent-%COMP%]{justify-content:flex-start}"]}),o})();class y extends x.e{constructor(){super()}get endPoint(){return"mesas"}getFilterText(){return`${this.numero_lista.toString()} ${this.nombre}`}}var Q=d(2962),G=d(229),L=d(9765);function Ie(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1,"Nombre"),e.qZA())}function ze(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",14),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectCandidato(l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.nombre)}}function Ke(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1,"Apellido"),e.qZA())}function Xe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",14),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectCandidato(l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.apellido)}}function We(o,a){1&o&&e._UZ(0,"tr",15)}function Ve(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr",16),e.NdJ("dblclick",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectAndClose(l))}),e.qZA()}if(2&o){const t=a.$implicit,n=e.oxw();e.ekj("selected",n.isSelected(t))}}let et=(()=>{class o{constructor(t,n){this.dialogRef=t,this.companeroService=n,this.candidatos=[],this.candidatosFiltrados=this.candidatos,this.displayedColumns=["nombre","apellido"],this._filterText="",this.selectedCandidato=void 0}ngOnInit(){this.loadData()}loadData(){const t=new L.h;this.companeroService.getAllEntity(t).subscribe(n=>{this.candidatos=n.map(i=>Object.assign(new L.h,i)),this.candidatosFiltrados=this.candidatos})}applyFilter(t){this.candidatosFiltrados=x.e.Filtrar(this.candidatos,t)}selectCandidato(t){this.selectedCandidato=t}selectAndClose(t){this.selectedCandidato=t,this.dialogRef.close(t)}isSelected(t){return this.selectedCandidato===t}get filterText(){return this._filterText}set filterText(t){this._filterText=t,console.log("Nuevo valor de filterText:",t),this.applyFilter(t)}cancel(){this.selectedCandidato=void 0,this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.so),e.Y36(T.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-select-candidato"]],decls:19,vars:5,consts:[["mat-dialog-title",""],[1,"full-width"],["matInput","","placeholder","Filtrar Candidatos",3,"ngModel","ngModelChange"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","apellido"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","dblclick",4,"matRowDef","matRowDefColumns"],[1,"button-container"],["mat-button","",1,"btn-guardar",3,"mat-dialog-close"],["mat-button","",1,"btn-cerrar",3,"click"],["mat-header-cell",""],["mat-cell","",3,"click"],["mat-header-row",""],["mat-row","",3,"dblclick"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Seleccionar Compa\xf1ero"),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"input",2),e.NdJ("ngModelChange",function(l){return n.filterText=l}),e.qZA()(),e.TgZ(5,"table",3),e.ynx(6,4),e.YNc(7,Ie,2,0,"th",5),e.YNc(8,ze,2,1,"td",6),e.BQk(),e.ynx(9,7),e.YNc(10,Ke,2,0,"th",5),e.YNc(11,Xe,2,1,"td",6),e.BQk(),e.YNc(12,We,1,0,"tr",8),e.YNc(13,Ve,1,2,"tr",9),e.qZA()(),e.TgZ(14,"mat-dialog-actions",10)(15,"button",11),e._uU(16,"Seleccionar"),e.qZA(),e.TgZ(17,"button",12),e.NdJ("click",function(){return n.cancel()}),e._uU(18,"Cancelar"),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngModel",n.filterText),e.xp6(1),e.Q6J("dataSource",n.candidatosFiltrados),e.xp6(7),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(2),e.Q6J("mat-dialog-close",n.selectedCandidato))},dependencies:[p.lW,m.ZT,m.uh,m.xY,m.H8,f.KE,v.Nt,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,c.Fj,c.JJ,c.On],styles:["tr.selected[_ngcontent-%COMP%]{background-color:#9ee29b}.full-width[_ngcontent-%COMP%]{width:100%}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;width:150px}.btn-cerrar[_ngcontent-%COMP%]{background-color:#e91e63;color:#fff}.button-container[_ngcontent-%COMP%]   button.btn-guardar[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}"]}),o})();var tt=d(7921);let H=(()=>{class o{constructor(t,n,i){this.Urls=t,this.http=n,this.setupService=i,this.eleccion=null,this.url=this.Urls.apiUrl,this.setupService.eleccionOb$.subscribe(l=>{this.eleccion=l})}getHttpHeaders(){return new b.WM({"Content-Type":"application/json",Accept:"application/json"})}getAllByEleccion(){const t=this.url+"listas/obtenerPorEleccion";let n=0;this.eleccion&&(n=this.eleccion.id);const i=(new b.LE).set("eleccion_id",n),l={headers:this.getHttpHeaders(),params:i};return this.http.get(t,l)}setListaElectoral(t){const n=this.url+"listas",{id:i,...l}=t;let r={headers:this.getHttpHeaders()};return this.http.post(n,l,r)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(J.Y),e.LFG(b.eN),e.LFG(g.U))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})();function ot(o,a){if(1&o&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function nt(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"El nro de lista es requeridos"),e.qZA())}function at(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"El nombre de lista es requeridos"),e.qZA())}function it(o,a){if(1&o&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function lt(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"El candidato es requerido"),e.qZA())}let st=(()=>{class o{constructor(t,n,i,l,r,M,_){this.dialog=t,this.setupService=n,this.dialogRef=i,this.formBuilder=l,this.listaService=r,this.abmService=M,this.data=_,this.isUpdate=!1,this.partidos=[],this.cargos=[],this.eleccion=null,this._candidatoSeleccionado=void 0,this._cargoSeleccionado=void 0,this.partidoFiltrado=new c.NI,this.partidosFiltrados=[],this._listaElegida=_.lista,this.form=this.formBuilder.group({numero_lista:["",c.kI.required],nombre:["",c.kI.required],partido_id:["",c.kI.required],candidato_id:["",c.kI.required],eleccion_id:["",c.kI.required],cargo_id:["",c.kI.required]})}ngOnInit(){this.setupService.eleccionOb$.subscribe(t=>{this.eleccion=t,this.form.get("eleccion_id")?.setValue(t.id)}),this.loadData(),this.partidoFiltrado.valueChanges.pipe((0,tt.O)("")).subscribe(t=>{this.filterPartidos(t)})}loadData(){const t=new G.D;this.abmService.getAllEntity(t).subscribe(i=>{this.partidos=i.map(l=>Object.assign(new G.D,l)),this.filterPartidos("")});const n=new Q.r;this.abmService.getAllEntity(n).subscribe(i=>{this.cargos=i.map(l=>Object.assign(new Q.r,l))}),this._listaElegida&&this._listaElegida.id>0&&(this.isUpdate=!0,this.form.get("numero_lista")?.setValue(this._listaElegida.numero_lista),this.form.get("nombre")?.setValue(this._listaElegida.nombre),this.form.get("partido_id")?.setValue(this._listaElegida.partido_id),this.form.get("candidato_id")?.setValue(this._listaElegida.candidato_id),this.form.get("eleccion_id")?.setValue(this._listaElegida.eleccion_id),this.form.get("cargo_id")?.setValue(this._listaElegida.cargo_id))}openSelectCandidatoModal(t){t.stopPropagation(),t.preventDefault(),this.dialog.open(et,{width:"900px",panelClass:"custom-modal-container"}).afterClosed().subscribe(i=>{i&&(console.log(i),this._candidatoSeleccionado=i,this.form.get("candidato_id")?.setValue(i.id))})}set partidoElegido(t){this._partidoElegido=t}set cargoElegido(t){this._cargoSeleccionado=t}setLista(){let t=new y;t=Object.assign(new y,this.form.value),this.listaService.setListaElectoral(t).subscribe({next:n=>{n.errors?u().fire({icon:"error",title:"Oops...",text:n.errors[0].message}):u().fire({icon:"success",title:"Configuracion exitosa",text:"Se genero un nuevo Fical de Mesa"}).then(()=>{this.dialogRef.close()})},error:n=>{u().fire({icon:"error",title:"Oops...",text:n.errors[0].message})}})}displayPartido(t){return t?t.nombre:""}filterPartidos(t){this.partidosFiltrados=this.partidos.filter(n=>n.nombre.toLowerCase().includes(t.toLowerCase()))}closeModal(t){t.stopPropagation(),t.preventDefault(),this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.uw),e.Y36(g.U),e.Y36(m.so),e.Y36(c.qu),e.Y36(H),e.Y36(T.I),e.Y36(m.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-listas"]],decls:38,vars:13,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-column"],["appearance","fill",1,"select-field"],["formControlName","partido_id",3,"ngModel","formControl","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",1,"input-field"],["matInput","","placeholder","Nro de lista","formControlName","numero_lista"],[4,"ngIf"],["matInput","","placeholder","Nombre de lista","formControlName","nombre"],["formControlName","cargo_id",3,"ngModel","ngModelChange"],["matInput","","placeholder","Candidato",3,"readonly","value"],["mat-icon-button","","matSuffix","",3,"click"],[1,"button-container"],["mat-raised-button","","type","submit",1,"btn-guardar",3,"disabled"],["mat-button","",1,"btn-cerrar",3,"click"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return n.setLista()}),e.TgZ(4,"div",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),e._uU(8,"Seleccionar Partido"),e.qZA(),e.TgZ(9,"mat-select",5),e.NdJ("ngModelChange",function(l){return n.form.value.partido_id=l}),e.YNc(10,ot,2,2,"mat-option",6),e.qZA()()()(),e.TgZ(11,"div",2)(12,"div",3)(13,"mat-form-field",7),e._UZ(14,"input",8),e.YNc(15,nt,2,0,"mat-error",9),e.qZA()(),e.TgZ(16,"div",3)(17,"mat-form-field",7),e._UZ(18,"input",10),e.YNc(19,at,2,0,"mat-error",9),e.qZA()()(),e.TgZ(20,"div",2)(21,"div",3)(22,"mat-form-field",4)(23,"mat-label"),e._uU(24,"Seleccionar Cargo"),e.qZA(),e.TgZ(25,"mat-select",11),e.NdJ("ngModelChange",function(l){return n.form.value.cargo_id=l}),e.YNc(26,it,2,2,"mat-option",6),e.qZA()()()(),e.TgZ(27,"mat-form-field",7),e._UZ(28,"input",12),e.TgZ(29,"button",13),e.NdJ("click",function(l){return n.openSelectCandidatoModal(l)}),e.TgZ(30,"mat-icon"),e._uU(31,"search"),e.qZA()(),e.YNc(32,lt,2,0,"mat-error",9),e.qZA(),e.TgZ(33,"div",14)(34,"button",15),e._uU(35,"Guardar"),e.qZA(),e.TgZ(36,"button",16),e.NdJ("click",function(l){return n.closeModal(l)}),e._uU(37,"Cerrar"),e.qZA()()()()),2&t&&(e.xp6(2),e.Oqu(n.isUpdate?"Actualizar Lista Electoral":"Agregar Lista Electoral"),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("ngModel",n.form.value.partido_id)("formControl",n.partidoFiltrado),e.xp6(1),e.Q6J("ngForOf",n.partidosFiltrados),e.xp6(5),e.Q6J("ngIf",n.form.controls.numero_lista.hasError("required")),e.xp6(4),e.Q6J("ngIf",n.form.controls.nombre.hasError("required")),e.xp6(6),e.Q6J("ngModel",n.form.value.cargo_id),e.xp6(1),e.Q6J("ngForOf",n.cargos),e.xp6(2),e.Q6J("readonly",!0)("value",null==n._candidatoSeleccionado?null:n._candidatoSeleccionado.nombre),e.xp6(4),e.Q6J("ngIf",n.form.controls.candidato_id.hasError("required")),e.xp6(2),e.Q6J("disabled",n.form.invalid))},dependencies:[h.sg,h.O5,C.Hw,p.lW,p.RK,m.xY,f.KE,f.hX,f.TO,f.R9,v.Nt,E.gD,w.ey,c._Y,c.Fj,c.JJ,c.JL,c.oH,c.sg,c.u],styles:[".form-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.form-column[_ngcontent-%COMP%]{flex:1;margin-right:10px}.select-field[_ngcontent-%COMP%]{width:100%}.input-field[_ngcontent-%COMP%]{width:98%;margin-top:10px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;width:150px}.btn-cerrar[_ngcontent-%COMP%]{background-color:#e91e63;color:#fff}.button-container[_ngcontent-%COMP%]   button.btn-guardar[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}"]}),o})();function rt(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1,"Numero "),e.qZA())}function ct(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.numero_lista," ")}}function dt(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Nombre "),e.qZA())}function mt(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.nombre," ")}}function pt(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Partido"),e.qZA())}function ut(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij("",t.Partido.nombre," ")}}function ft(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1,"Cargo "),e.qZA())}function gt(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.Cargo.nombre," ")}}function _t(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1,"Candidato "),e.qZA())}function ht(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.Candidato.nombre," ")}}function Ct(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Acciones "),e.qZA())}function bt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",14)(1,"button",15),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.borrarListaElectoral(l))}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()()}}function Mt(o,a){1&o&&e._UZ(0,"tr",16)}function Tt(o,a){1&o&&e._UZ(0,"tr",17)}const Zt=function(){return[5,10,25]},vt=[{path:"",component:K,children:[{path:"mesa-electoral",component:X.k},{path:"fiscales-mesas",component:Ue},{path:"fiscales-generales",component:je},{path:"listas",component:(()=>{class o{constructor(t,n,i,l,r){this.abmService=t,this.listaService=n,this.setupService=i,this.dialog=l,this.zone=r,this.displayedColumns=["numero","nombre","partido","cargo","candidato","acciones"]}ngOnInit(){this.loadData()}loadData(){new y,this.listaService.getAllByEleccion().subscribe(n=>{this.listasElectorales=n.map(i=>Object.assign(new y,i)),this.dataSource=new s.by(this.listasElectorales),this.dataSource.paginator=this.paginator})}abrirModal(t){this.dialog.open(st,{data:{eleccion:{lista:t}},width:"600px",panelClass:"custom-modal-container"}).afterClosed().subscribe(i=>{this.zone.run(()=>{console.log("El modal se cerr\xf3"),this.loadData()})})}borrarListaElectoral(t){u().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, borrar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.abmService.delete(t).subscribe(i=>{u().fire({icon:"success",title:"Lista Borrada borrada",text:"La lista elecotral ha sido borrada exitosamente"}),this.loadData()},i=>{u().fire({icon:"error",title:"Error al borrar escuela",text:"Ha ocurrido un error al borrar la mesa"}),console.log(i)})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.I),e.Y36(H),e.Y36(g.U),e.Y36(m.uw),e.Y36(e.R0b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-listas-electorales"]],viewQuery:function(t,n){if(1&t&&e.Gf(Z.NW,5),2&t){let i;e.iGM(i=e.CRH())&&(n.paginator=i.first)}},decls:26,vars:6,consts:[["mat-fab","","color","primary",1,"floating-button",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","numero"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","partido"],["matColumnDef","cargo"],["matColumnDef","candidato"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator-left",3,"pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return n.abrirModal()}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()(),e.TgZ(3,"table",1),e._uU(4,"x "),e.ynx(5,2),e.YNc(6,rt,2,0,"th",3),e.YNc(7,ct,2,1,"td",4),e.BQk(),e.ynx(8,5),e.YNc(9,dt,2,0,"th",3),e.YNc(10,mt,2,1,"td",4),e.BQk(),e.ynx(11,6),e.YNc(12,pt,2,0,"th",3),e.YNc(13,ut,2,1,"td",4),e.BQk(),e.ynx(14,7),e.YNc(15,ft,2,0,"th",3),e.YNc(16,gt,2,1,"td",4),e.BQk(),e.ynx(17,8),e.YNc(18,_t,2,0,"th",3),e.YNc(19,ht,2,1,"td",4),e.BQk(),e.ynx(20,9),e.YNc(21,Ct,2,0,"th",3),e.YNc(22,bt,4,0,"td",4),e.BQk(),e.YNc(23,Mt,1,0,"tr",10),e.YNc(24,Tt,1,0,"tr",11),e.qZA(),e._UZ(25,"mat-paginator",12)),2&t&&(e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(20),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSize",10)("pageSizeOptions",e.DdM(5,Zt)))},dependencies:[C.Hw,p.RK,p.cs,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,Z.NW],styles:[".custom-modal-background[_ngcontent-%COMP%]{background-color:#1a237e;background-image:linear-gradient(to bottom,#1a237e,#3949ab)}.floating-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;border-radius:50%;background-color:#4caf50;color:#fff}.floating-button[_ngcontent-%COMP%]:hover{background-color:#52e85a}.mat-paginator[_ngcontent-%COMP%]{justify-content:flex-start}.mat-paginator[_ngcontent-%COMP%]   .mat-paginator-navigation[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%], .mat-paginator[_ngcontent-%COMP%]   .mat-paginator-page-size[_ngcontent-%COMP%]{margin-right:10px}.paginator-left[_ngcontent-%COMP%]   .mat-paginator-range-label[_ngcontent-%COMP%], .paginator-left[_ngcontent-%COMP%]   .mat-paginator-navigation[_ngcontent-%COMP%]{justify-content:flex-start}"]}),o})()}]}];let St=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[S.Bz.forChild(vt),S.Bz]}),o})();var Ft=d(8317);let Ot=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.ez,St,Ft.q,c.u5,c.UX]}),o})()}}]);