"use strict";(self.webpackChunkEleccionesFront=self.webpackChunkEleccionesFront||[]).push([[623],{9623:(Ie,N,s)=>{s.r(N),s.d(N,{SetupEleccionModule:()=>je});var g=s(6814),M=s(1896),e=s(5879),_=s(9986),Y=s(1088),D=s(7398),J=s(940),q=s(1139),Q=s(1274),C=s(617),d=s(2296),S=s(2651),w=s(1919),T=s(3305);function H(o,a){if(1&o&&(e.TgZ(0,"div")(1,"span"),e._uU(2),e.ALo(3,"async"),e.qZA()()),2&o){const t=e.oxw();let n;e.xp6(2),e.hij(" Setup - ",null==(n=e.lcZ(3,1,t.setupService.eleccionOb$))?null:n.nombre,"")}}let R=(()=>{class o{constructor(t,n,i){this.breakpointObserver=t,this.setupService=n,this.functionCallingService=i,this.isHandset$=this.breakpointObserver.observe(Y.u3.Handset).pipe((0,D.U)(l=>l.matches),(0,J.d)()),this.funciones=[{name:"expandir_contraer_ABM",description:"Expande o contrae el menu de ABM",parameters:{type:"object",properties:{toogle:{type:"boolean",description:"El valor con el que se contrae o expande el menu"}}}}],this.functionCallingService.addFunctions(this.funciones)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Y.Yg),e.Y36(_.U),e.Y36(q.V))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sidebar-setup"]],decls:39,vars:12,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],[1,"mat-elevation-z0"],["mat-list-item","","routerLink","/setup-elecccion/mesa-electoral"],["mat-list-item","","routerLink","/setup-elecccion/fiscales-mesas"],["mat-list-item","","routerLink","/setup-elecccion/fiscales-generales"],[1,"app-nav-accordion"],["mat-list-item",""],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],[1,"example-spacer"],[4,"ngIf"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.TgZ(6,"mat-toolbar"),e._uU(7,"Setup Elecciones"),e.qZA(),e.TgZ(8,"mat-accordion")(9,"mat-expansion-panel",3)(10,"mat-expansion-panel-header")(11,"mat-panel-title"),e._uU(12,"Seccion de Configuracion"),e.qZA()(),e.TgZ(13,"mat-nav-list")(14,"a",4),e._uU(15,"Configurar Mesas Electorales"),e.qZA(),e.TgZ(16,"a",5),e._uU(17,"Configurar Fiscales de Mesas"),e.qZA(),e.TgZ(18,"a",6),e._uU(19,"Configurar Fiscales Generales"),e.qZA()()()(),e.TgZ(20,"mat-accordion",7)(21,"mat-expansion-panel",3)(22,"mat-expansion-panel-header")(23,"mat-panel-title"),e._uU(24,"Consultas de Configuracion"),e.qZA()(),e.TgZ(25,"mat-nav-list")(26,"a",8),e._uU(27,"Item Three"),e.qZA(),e.TgZ(28,"a",8),e._uU(29,"Item Four"),e.qZA()()()()(),e.TgZ(30,"mat-sidenav-content")(31,"mat-toolbar",9)(32,"button",10),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(2);return e.KtG(r.toggle())}),e.TgZ(33,"mat-icon",11),e._uU(34,"menu"),e.qZA()(),e._UZ(35,"span",12),e.YNc(36,H,4,3,"div",13),e.ALo(37,"async"),e.qZA(),e._UZ(38,"router-outlet"),e.qZA()()}2&t&&(e.xp6(1),e.Q6J("mode",e.lcZ(4,6,n.isHandset$)?"over":"side")("opened",!1===e.lcZ(5,8,n.isHandset$)),e.uIk("role",e.lcZ(3,4,n.isHandset$)?"dialog":"navigation"),e.xp6(35),e.Q6J("ngIf",e.lcZ(37,10,n.setupService.eleccionOb$)))},dependencies:[g.O5,M.lC,M.rH,Q.Ye,C.Hw,d.RK,S.JX,S.TM,S.Rh,w.Hk,w.Tg,T.pp,T.ib,T.yz,T.yK,g.Ov]}),o})(),B=(()=>{class o{constructor(t){this.setupService=t,this.e=null,this.setupService.eleccionOb$.subscribe(n=>this.e=n)}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.U))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-layout"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"app-sidebar-setup")},dependencies:[R]}),o})();var $=s(8209),A=s(2061);class j extends A.e{constructor(){super()}get endPoint(){return"fiscalesdemesas"}getFilterText(){return`${this.Companero.nombre} ${this.MesaElectoral.numeroMesa.toString()}`}}var m=s(6223),p=s(7700),E=s(4763),y=s(5573),u=s(4170),O=s(2032),c=s(5313);function I(o,a){1&o&&(e.TgZ(0,"th",15),e._uU(1,"Nombre"),e.qZA())}function z(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectCompanero(l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.nombre)}}function L(o,a){1&o&&(e.TgZ(0,"th",15),e._uU(1,"Apellido"),e.qZA())}function K(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectCompanero(l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.apellido)}}function X(o,a){1&o&&(e.TgZ(0,"th",15),e._uU(1,"DNI"),e.qZA())}function W(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectCompanero(l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.dni)}}function V(o,a){1&o&&(e.TgZ(0,"th",15),e._uU(1,"Telefono"),e.qZA())}function ee(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectCompanero(l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.tel)}}function te(o,a){1&o&&e._UZ(0,"tr",17)}function oe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr",18),e.NdJ("dblclick",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.selectAndClose(l))}),e.qZA()}if(2&o){const t=a.$implicit,n=e.oxw();e.ekj("selected",n.isSelected(t))}}let G=(()=>{class o{constructor(t,n){this.dialogRef=t,this.companeroService=n,this.companeros=[],this.companerosFiltrados=this.companeros,this.displayedColumns=["nombre","apellido","dni","tel"],this._filterText="",this.selectedCompanero=void 0}ngOnInit(){this.loadData()}loadData(){const t=new E.Q;this.companeroService.getAllEntity(t).subscribe(n=>{this.companeros=n.map(i=>Object.assign(new E.Q,i)),this.companerosFiltrados=this.companeros})}applyFilter(t){this.companerosFiltrados=A.e.Filtrar(this.companeros,t)}selectCompanero(t){this.selectedCompanero=t}selectAndClose(t){this.selectedCompanero=t,this.dialogRef.close(t)}isSelected(t){return this.selectedCompanero===t}get filterText(){return this._filterText}set filterText(t){this._filterText=t,console.log("Nuevo valor de filterText:",t),this.applyFilter(t)}cancel(){this.selectedCompanero=void 0,this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.so),e.Y36(y.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-select-companero-modal"]],decls:25,vars:5,consts:[["mat-dialog-title",""],[1,"full-width"],["matInput","","placeholder","Filtrar Compa\xf1ero",3,"ngModel","ngModelChange"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","apellido"],["matColumnDef","dni"],["matColumnDef","tel"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","dblclick",4,"matRowDef","matRowDefColumns"],[1,"button-container"],["mat-button","",1,"btn-guardar",3,"mat-dialog-close"],["mat-button","",1,"btn-cerrar",3,"click"],["mat-header-cell",""],["mat-cell","",3,"click"],["mat-header-row",""],["mat-row","",3,"dblclick"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Seleccionar Compa\xf1ero"),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"input",2),e.NdJ("ngModelChange",function(l){return n.filterText=l}),e.qZA()(),e.TgZ(5,"table",3),e.ynx(6,4),e.YNc(7,I,2,0,"th",5),e.YNc(8,z,2,1,"td",6),e.BQk(),e.ynx(9,7),e.YNc(10,L,2,0,"th",5),e.YNc(11,K,2,1,"td",6),e.BQk(),e.ynx(12,8),e.YNc(13,X,2,0,"th",5),e.YNc(14,W,2,1,"td",6),e.BQk(),e.ynx(15,9),e.YNc(16,V,2,0,"th",5),e.YNc(17,ee,2,1,"td",6),e.BQk(),e.YNc(18,te,1,0,"tr",10),e.YNc(19,oe,1,2,"tr",11),e.qZA()(),e.TgZ(20,"mat-dialog-actions",12)(21,"button",13),e._uU(22,"Seleccionar"),e.qZA(),e.TgZ(23,"button",14),e.NdJ("click",function(){return n.cancel()}),e._uU(24,"Cancelar"),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngModel",n.filterText),e.xp6(1),e.Q6J("dataSource",n.companerosFiltrados),e.xp6(13),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(2),e.Q6J("mat-dialog-close",n.selectedCompanero))},dependencies:[d.lW,p.ZT,p.uh,p.xY,p.H8,u.KE,O.Nt,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,m.Fj,m.JJ,m.On],styles:["tr.selected[_ngcontent-%COMP%]{background-color:#9ee29b}.full-width[_ngcontent-%COMP%]{width:100%}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;width:150px}.btn-cerrar[_ngcontent-%COMP%]{background-color:#e91e63;color:#fff}.button-container[_ngcontent-%COMP%]   button.btn-guardar[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}"]}),o})();var Z=s(5136),ne=s(3519),f=s.n(ne),x=s(9862),ae=s(7033);let v=(()=>{class o{constructor(t,n,i){this.Urls=t,this.http=n,this.setupService=i,this.eleccion=null,this.url=this.Urls.apiUrl,this.setupService.eleccionOb$.subscribe(l=>{this.eleccion=l})}getHttpHeaders(){return new x.WM({"Content-Type":"application/json",Accept:"application/json"})}getAllFiscalesMesas(){const t=this.url+"fiscalesdemesas";let n={headers:this.getHttpHeaders()};return this.http.get(t,n)}setFiscalMesa(t,n){const i=this.url+"fiscalesdemesas",l={mesa_id:n,companero_id:t};let r={headers:this.getHttpHeaders()};return this.http.post(i,l,r)}deleteFiscalMesa(t,n){const i=this.url+`fiscalesdemesas/${n}/${t}`;let r={headers:this.getHttpHeaders()};return this.http.delete(i,r)}getAllFiscalGenerales(){const t=this.url+"fiscalesgenerales/obtenerPorEleccion";let n=0;this.eleccion&&(n=this.eleccion.id);const i=(new x.LE).set("eleccion_id",n),l={headers:this.getHttpHeaders(),params:i};return this.http.get(t,l)}setFiscalGeneral(t){const n=this.url+"fiscalesgenerales",{id:i,...l}=t;let r={headers:this.getHttpHeaders()};return this.http.post(n,l,r)}deleteFiscalGeneral(t){const n=this.url+`${t.endPoint}`,i=t.companero_id,l=t.escuela_id,r=t.eleccion_id,b=(new x.LE).set("eleccion_id",r).set("escuela_id",l).set("companero_id",i),h={headers:this.getHttpHeaders(),params:b};return this.http.delete(n,h)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(ae.Y),e.LFG(x.eN),e.LFG(_.U))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var P=s(8525),k=s(3680);function ie(o,a){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nombre," ")}}function le(o,a){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.numeroMesa)}}function se(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"La escuela es requerida"),e.qZA())}function ce(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"El compa\xf1ero es requerido"),e.qZA())}let re=(()=>{class o{constructor(t,n,i,l,r,b,h){this.dialog=t,this.setupService=n,this.dialogRef=i,this.formBuilder=l,this.fiscalService=r,this.abmService=b,this.data=h,this.isUpdate=!1,this.escuelas=[],this.eleccion=null,this.mesasDeEscuela=[],this.companeroSeleccionado=void 0,this.fiscal=h.fiscal}ngOnInit(){this.loadData(),this.form=this.formBuilder.group({mesa_id:["",m.kI.required],companero_id:["",m.kI.required]}),this.fiscal&&(this.isUpdate=!0,this.form.get("mesa_id")?.setValue(this.fiscal.mesa_id),this.form.get("companero_id")?.setValue(this.fiscal.companero_id))}loadData(){const t=new Z.T;this.abmService.getAllEntity(t).subscribe(n=>{this.escuelas=n.map(i=>Object.assign(new Z.T,i))}),this.setupService.eleccionOb$.subscribe(n=>{this.eleccion=n})}set escuelaElegida(t){this._escuelaElegida=t,t?this.loadMesas(t):this.mesasDeEscuela=[]}loadMesas(t){this.setupService.getMesasByEscuela(t).subscribe(n=>{this.mesasDeEscuela=n})}openSelectCompaneroModal(t){t.stopPropagation(),t.preventDefault(),this.dialog.open(G).afterClosed().subscribe(i=>{i&&(console.log(i),this.companeroSeleccionado=i,this.form.get("companero_id")?.setValue(i.id))})}setFiscal(){const t=this.form.get("companero_id")?.value,n=this.form.get("mesa_id")?.value;this.fiscalService.setFiscalMesa(t,n).subscribe(i=>{f().fire({icon:"success",title:"Configuracion exitosa",text:"Se genero un nuevo Fical de Mesa"})})}closeModal(t){t.stopPropagation(),t.preventDefault(),this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.uw),e.Y36(_.U),e.Y36(p.so),e.Y36(m.qu),e.Y36(v),e.Y36(y.I),e.Y36(p.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fiscal-mesa-modal"]],decls:29,vars:11,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-column"],["appearance","fill",1,"select-field"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","mesa_id",3,"ngModel","ngModelChange"],[4,"ngIf"],["appearance","fill",1,"input-field"],["matInput","","placeholder","Compa\xf1ero",3,"readonly","value"],["mat-icon-button","","matSuffix","",3,"click"],[1,"button-container"],["mat-raised-button","","type","submit",1,"btn-guardar",3,"disabled"],["mat-button","",1,"btn-cerrar",3,"click"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return n.setFiscal()}),e.TgZ(4,"div",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),e._uU(8,"Seleccionar escuela"),e.qZA(),e.TgZ(9,"mat-select",5),e.NdJ("valueChange",function(l){return n.escuelaElegida=l}),e.YNc(10,ie,2,2,"mat-option",6),e.qZA()()(),e.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"Mesa Electoral"),e.qZA(),e.TgZ(15,"mat-select",7),e.NdJ("ngModelChange",function(l){return n.form.value.mesa_id=l}),e.YNc(16,le,2,2,"mat-option",6),e.qZA(),e.YNc(17,se,2,0,"mat-error",8),e.qZA()()(),e.TgZ(18,"mat-form-field",9),e._UZ(19,"input",10),e.TgZ(20,"button",11),e.NdJ("click",function(l){return n.openSelectCompaneroModal(l)}),e.TgZ(21,"mat-icon"),e._uU(22,"search"),e.qZA()(),e.YNc(23,ce,2,0,"mat-error",8),e.qZA(),e.TgZ(24,"div",12)(25,"button",13),e._uU(26,"Guardar"),e.qZA(),e.TgZ(27,"button",14),e.NdJ("click",function(l){return n.closeModal(l)}),e._uU(28,"Cerrar"),e.qZA()()()()),2&t&&(e.xp6(2),e.Oqu(n.isUpdate?"Actualizar Mesa":"Agregar Mesa"),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("value",n.escuelaElegida),e.xp6(1),e.Q6J("ngForOf",n.escuelas),e.xp6(5),e.Q6J("ngModel",n.form.value.mesa_id),e.xp6(1),e.Q6J("ngForOf",n.mesasDeEscuela),e.xp6(1),e.Q6J("ngIf",n.form.controls.mesa_id.hasError("required")),e.xp6(2),e.Q6J("readonly",!0)("value",null==n.companeroSeleccionado?null:n.companeroSeleccionado.nombre),e.xp6(4),e.Q6J("ngIf",n.form.controls.companero_id.hasError("required")),e.xp6(2),e.Q6J("disabled",n.form.invalid))},dependencies:[g.sg,g.O5,C.Hw,d.lW,d.RK,p.xY,u.KE,u.hX,u.TO,u.R9,O.Nt,P.gD,k.ey,m._Y,m.JJ,m.JL,m.sg,m.u],styles:[".form-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.form-column[_ngcontent-%COMP%]{flex:1;margin-right:10px}.select-field[_ngcontent-%COMP%]{width:100%}.input-field[_ngcontent-%COMP%]{width:98%;margin-top:10px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;width:150px}.btn-cerrar[_ngcontent-%COMP%]{background-color:#e91e63;color:#fff}.button-container[_ngcontent-%COMP%]   button.btn-guardar[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}"]}),o})();var F=s(3365);function me(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Escuela "),e.qZA())}function pe(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.MesaElectoral.Escuela.nombre," ")}}function de(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Numero de Mesa "),e.qZA())}function ue(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.MesaElectoral.numeroMesa," ")}}function fe(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Eleccion "),e.qZA())}function ge(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.MesaElectoral.Eleccion.nombre," ")}}function _e(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Apellido y Nombre "),e.qZA())}function he(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.AsE("",t.Companero.apellido,", ",t.Companero.nombre," ")}}function Ce(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1,"Telefono "),e.qZA())}function be(o,a){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.Companero.tel," ")}}function Me(o,a){1&o&&(e.TgZ(0,"th",13),e._uU(1," Acciones "),e.qZA())}function Te(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",14)(1,"button",15),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.borrarFiscalMesa(l))}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()()}}function Ze(o,a){1&o&&e._UZ(0,"tr",16)}function xe(o,a){1&o&&e._UZ(0,"tr",17)}const ve=function(){return[5,10,25]};let Fe=(()=>{class o{constructor(t,n,i){this.setupService=t,this.fiscalService=n,this.dialog=i,this.fiscalesMesas=[],this.displayedColumns=["escuela","mesa","eleccion","nombre","telefono","acciones"]}ngOnInit(){this.loadData()}loadData(){this.fiscalService.getAllFiscalesMesas().subscribe(t=>{this.fiscalesMesas=t.map(n=>Object.assign(new j,n)),this.dataSource=new c.by(this.fiscalesMesas),this.dataSource.paginator=this.paginator})}abrirModalAgregar(){this.dialog.open(re,{data:{mesa:void 0},width:"500px",panelClass:"custom-modal-background"}).afterClosed().subscribe(n=>{console.log("El modal se cerr\xf3"),this.loadData()})}borrarFiscalMesa(t){f().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, borrar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.fiscalService.deleteFiscalMesa(t.companero_id,t.mesa_id).subscribe(i=>{f().fire({icon:"success",title:"Escuela borrada",text:"La mesa  ha sido borrada exitosamente"}),this.loadData()},i=>{f().fire({icon:"error",title:"Error al borrar escuela",text:"Ha ocurrido un error al borrar la mesa"}),console.log(i)})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.U),e.Y36(v),e.Y36(p.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fiscales-mesas"]],viewQuery:function(t,n){if(1&t&&e.Gf(F.NW,5),2&t){let i;e.iGM(i=e.CRH())&&(n.paginator=i.first)}},decls:25,vars:6,consts:[["mat-fab","","color","primary",1,"floating-button",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","escuela"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","mesa"],["matColumnDef","eleccion"],["matColumnDef","nombre"],["matColumnDef","telefono"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator-left",3,"pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return n.abrirModalAgregar()}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()(),e.TgZ(3,"table",1),e.ynx(4,2),e.YNc(5,me,2,0,"th",3),e.YNc(6,pe,2,1,"td",4),e.BQk(),e.ynx(7,5),e.YNc(8,de,2,0,"th",3),e.YNc(9,ue,2,1,"td",4),e.BQk(),e.ynx(10,6),e.YNc(11,fe,2,0,"th",3),e.YNc(12,ge,2,1,"td",4),e.BQk(),e.ynx(13,7),e.YNc(14,_e,2,0,"th",3),e.YNc(15,he,2,2,"td",4),e.BQk(),e.ynx(16,8),e.YNc(17,Ce,2,0,"th",3),e.YNc(18,be,2,1,"td",4),e.BQk(),e.ynx(19,9),e.YNc(20,Me,2,0,"th",3),e.YNc(21,Te,4,0,"td",4),e.BQk(),e.YNc(22,Ze,1,0,"tr",10),e.YNc(23,xe,1,0,"tr",11),e.qZA(),e._UZ(24,"mat-paginator",12)),2&t&&(e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSize",10)("pageSizeOptions",e.DdM(5,ve)))},dependencies:[C.Hw,d.RK,d.cs,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,F.NW],styles:[".custom-modal-background[_ngcontent-%COMP%]{background-color:#1a237e;background-image:linear-gradient(to bottom,#1a237e,#3949ab)}.floating-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;border-radius:50%;background-color:#4caf50;color:#fff}.floating-button[_ngcontent-%COMP%]:hover{background-color:#52e85a}.mat-paginator[_ngcontent-%COMP%]{justify-content:flex-start}.mat-paginator[_ngcontent-%COMP%]   .mat-paginator-navigation[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%], .mat-paginator[_ngcontent-%COMP%]   .mat-paginator-page-size[_ngcontent-%COMP%]{margin-right:10px}.paginator-left[_ngcontent-%COMP%]   .mat-paginator-range-label[_ngcontent-%COMP%], .paginator-left[_ngcontent-%COMP%]   .mat-paginator-navigation[_ngcontent-%COMP%]{justify-content:flex-start}"]}),o})();class U extends A.e{get endPoint(){return"fiscalesgenerales"}getFilterText(){throw new Error("Method not implemented.")}constructor(){super()}}function Se(o,a){if(1&o&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function Ae(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"El compa\xf1ero es requerido"),e.qZA())}let ye=(()=>{class o{constructor(t,n,i,l,r,b,h){this.dialog=t,this.setupService=n,this.dialogRef=i,this.formBuilder=l,this.fiscalService=r,this.abmService=b,this.data=h,this.isUpdate=!1,this.escuelas=[],this.eleccion=null,this.companeroSeleccionado=void 0,this.fiscal=h.fiscal}ngOnInit(){this.loadData(),this.form=this.formBuilder.group({escuela_id:["",m.kI.required],companero_id:["",m.kI.required]}),this.setupService.eleccionOb$.subscribe(t=>{this.eleccion=t}),this.fiscal&&(this.isUpdate=!0,this.form.get("escuela_id")?.setValue(this.fiscal.escuela_id),this.form.get("companero_id")?.setValue(this.fiscal.companero_id))}loadData(){const t=new Z.T;this.abmService.getAllEntity(t).subscribe(n=>{this.escuelas=n.map(i=>Object.assign(new Z.T,i))}),this.setupService.eleccionOb$.subscribe(n=>{this.eleccion=n})}openSelectCompaneroModal(t){t.stopPropagation(),t.preventDefault(),this.dialog.open(G).afterClosed().subscribe(i=>{i&&(console.log(i),this.companeroSeleccionado=i,this.form.get("companero_id")?.setValue(i.id))})}set escuelaElegida(t){this._escuelaElegida=t}setFiscal(){this.form.get("companero_id"),this.form.get("mesa_id");let i=new U;i=Object.assign(new U,this.form.value),i.eleccion_id=this.eleccion?.id?this.eleccion.id:0,this.fiscalService.setFiscalGeneral(i).subscribe(l=>{l.errors?f().fire({icon:"error",title:"Oops...",text:l.errors[0].message}):f().fire({icon:"success",title:"Configuracion exitosa",text:"Se genero un nuevo Fical de Mesa"}).then(()=>{this.dialogRef.close()})})}closeModal(t){t.stopPropagation(),t.preventDefault(),this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.uw),e.Y36(_.U),e.Y36(p.so),e.Y36(m.qu),e.Y36(v),e.Y36(y.I),e.Y36(p.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fiscal-general-modal"]],decls:22,vars:8,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-column"],["appearance","fill",1,"select-field"],["formControlName","escuela_id",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",1,"input-field"],["matInput","","placeholder","Compa\xf1ero",3,"readonly","value"],["mat-icon-button","","matSuffix","",3,"click"],[4,"ngIf"],[1,"button-container"],["mat-raised-button","","type","submit",1,"btn-guardar",3,"disabled"],["mat-button","",1,"btn-cerrar",3,"click"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return n.setFiscal()}),e.TgZ(4,"div",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),e._uU(8,"Seleccionar escuela"),e.qZA(),e.TgZ(9,"mat-select",5),e.NdJ("ngModelChange",function(l){return n.form.value.escuela_id=l}),e.YNc(10,Se,2,2,"mat-option",6),e.qZA()()()(),e.TgZ(11,"mat-form-field",7),e._UZ(12,"input",8),e.TgZ(13,"button",9),e.NdJ("click",function(l){return n.openSelectCompaneroModal(l)}),e.TgZ(14,"mat-icon"),e._uU(15,"search"),e.qZA()(),e.YNc(16,Ae,2,0,"mat-error",10),e.qZA(),e.TgZ(17,"div",11)(18,"button",12),e._uU(19,"Guardar"),e.qZA(),e.TgZ(20,"button",13),e.NdJ("click",function(l){return n.closeModal(l)}),e._uU(21,"Cerrar"),e.qZA()()()()),2&t&&(e.xp6(2),e.Oqu(n.isUpdate?"Actualizar Fiscal General":"Agregar Fiscal General"),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("ngModel",n.form.value.escuela_id),e.xp6(1),e.Q6J("ngForOf",n.escuelas),e.xp6(2),e.Q6J("readonly",!0)("value",null==n.companeroSeleccionado?null:n.companeroSeleccionado.nombre),e.xp6(4),e.Q6J("ngIf",n.form.controls.companero_id.hasError("required")),e.xp6(2),e.Q6J("disabled",n.form.invalid))},dependencies:[g.sg,g.O5,C.Hw,d.lW,d.RK,p.xY,u.KE,u.hX,u.TO,u.R9,O.Nt,P.gD,k.ey,m._Y,m.JJ,m.JL,m.sg,m.u],styles:[".form-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.form-column[_ngcontent-%COMP%]{flex:1;margin-right:10px}.select-field[_ngcontent-%COMP%]{width:100%}.input-field[_ngcontent-%COMP%]{width:98%;margin-top:10px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;width:150px}.btn-cerrar[_ngcontent-%COMP%]{background-color:#e91e63;color:#fff}.button-container[_ngcontent-%COMP%]   button.btn-guardar[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}"]}),o})();function Oe(o,a){1&o&&(e.TgZ(0,"th",12),e._uU(1," Escuela "),e.qZA())}function Ue(o,a){if(1&o&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.Escuela.nombre," ")}}function Ne(o,a){1&o&&(e.TgZ(0,"th",12),e._uU(1," Eleccion "),e.qZA())}function Ye(o,a){if(1&o&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.Eleccion.nombre," ")}}function we(o,a){1&o&&(e.TgZ(0,"th",12),e._uU(1," Apellido y Nombre "),e.qZA())}function Ee(o,a){if(1&o&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.AsE("",t.Companero.apellido,", ",t.Companero.nombre," ")}}function Ge(o,a){1&o&&(e.TgZ(0,"th",12),e._uU(1,"Telefono "),e.qZA())}function Pe(o,a){if(1&o&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.Companero.tel," ")}}function ke(o,a){1&o&&(e.TgZ(0,"th",12),e._uU(1," Acciones "),e.qZA())}function De(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",13)(1,"button",14),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.borrarFiscalGeneral(l))}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()()}}function Je(o,a){1&o&&e._UZ(0,"tr",15)}function qe(o,a){1&o&&e._UZ(0,"tr",16)}const Qe=function(){return[5,10,25]},Re=[{path:"",component:B,children:[{path:"mesa-electoral",component:$.k},{path:"fiscales-mesas",component:Fe},{path:"fiscales-generales",component:(()=>{class o{constructor(t,n,i){this.setupService=t,this.fiscalService=n,this.dialog=i,this.fiscalGeneral=[],this.displayedColumns=["escuela","eleccion","nombre","telefono","acciones"]}ngOnInit(){this.loadData()}loadData(){this.fiscalService.getAllFiscalGenerales().subscribe(t=>{this.fiscalGeneral=t.map(n=>Object.assign(new U,n)),this.dataSource=new c.by(this.fiscalGeneral),this.dataSource.paginator=this.paginator})}abrirModalAgregar(){this.dialog.open(ye,{data:{mesa:void 0},width:"500px",panelClass:"custom-modal-background"}).afterClosed().subscribe(n=>{console.log("El modal se cerr\xf3"),this.loadData()})}borrarFiscalGeneral(t){f().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, borrar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.fiscalService.deleteFiscalGeneral(t).subscribe(i=>{f().fire({icon:"success",title:"Fiscal General borrado",text:"El Fiscal General ha sido borrado correctamente"}),this.loadData()},i=>{f().fire({icon:"error",title:"Error al borrar escuela",text:"Ha ocurrido un error al borrar el fiscal general"}),console.log(i)})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.U),e.Y36(v),e.Y36(p.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fiscales-generales"]],viewQuery:function(t,n){if(1&t&&e.Gf(F.NW,5),2&t){let i;e.iGM(i=e.CRH())&&(n.paginator=i.first)}},decls:23,vars:6,consts:[["mat-fab","","color","primary",1,"floating-button",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","escuela"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","eleccion"],["matColumnDef","nombre"],["matColumnDef","telefono"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator-left",3,"pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return n.abrirModalAgregar()}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()(),e.TgZ(3,"table",1),e._uU(4,"x "),e.ynx(5,2),e.YNc(6,Oe,2,0,"th",3),e.YNc(7,Ue,2,1,"td",4),e.BQk(),e.ynx(8,5),e.YNc(9,Ne,2,0,"th",3),e.YNc(10,Ye,2,1,"td",4),e.BQk(),e.ynx(11,6),e.YNc(12,we,2,0,"th",3),e.YNc(13,Ee,2,2,"td",4),e.BQk(),e.ynx(14,7),e.YNc(15,Ge,2,0,"th",3),e.YNc(16,Pe,2,1,"td",4),e.BQk(),e.ynx(17,8),e.YNc(18,ke,2,0,"th",3),e.YNc(19,De,4,0,"td",4),e.BQk(),e.YNc(20,Je,1,0,"tr",9),e.YNc(21,qe,1,0,"tr",10),e.qZA(),e._UZ(22,"mat-paginator",11)),2&t&&(e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(17),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSize",10)("pageSizeOptions",e.DdM(5,Qe)))},dependencies:[C.Hw,d.RK,d.cs,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,F.NW],styles:[".custom-modal-background[_ngcontent-%COMP%]{background-color:#1a237e;background-image:linear-gradient(to bottom,#1a237e,#3949ab)}.floating-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;border-radius:50%;background-color:#4caf50;color:#fff}.floating-button[_ngcontent-%COMP%]:hover{background-color:#52e85a}.mat-paginator[_ngcontent-%COMP%]{justify-content:flex-start}.mat-paginator[_ngcontent-%COMP%]   .mat-paginator-navigation[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%], .mat-paginator[_ngcontent-%COMP%]   .mat-paginator-page-size[_ngcontent-%COMP%]{margin-right:10px}.paginator-left[_ngcontent-%COMP%]   .mat-paginator-range-label[_ngcontent-%COMP%], .paginator-left[_ngcontent-%COMP%]   .mat-paginator-navigation[_ngcontent-%COMP%]{justify-content:flex-start}"]}),o})()}]}];let Be=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[M.Bz.forChild(Re),M.Bz]}),o})();var $e=s(9173);let je=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,Be,$e.q,m.u5,m.UX]}),o})()}}]);