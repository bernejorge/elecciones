"use strict";(self.webpackChunkEleccionesFront=self.webpackChunkEleccionesFront||[]).push([[941],{6136:(f,m,o)=>{o.d(m,{k:()=>z});var c=o(2828),r=o(8849),d=o(6861),h=o(5136),C=o(9460),Z=o(7889),p=o.n(Z),e=o(1699),b=o(5573),T=o(6575),g=o(895),_=o(1268),v=o(9674),E=o(6355),O=o(257);function A(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"El nrp de mesa es requeridos"),e.qZA())}function P(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"La Cantidad de votantes es requerida"),e.qZA())}function U(t,s){if(1&t&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&t){const n=s.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function D(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"La escuela es requerida"),e.qZA())}function y(t,s){if(1&t&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&t){const n=s.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function N(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"La eleccion a la que pertenece es requerida"),e.qZA())}let x=(()=>{class t{constructor(n,a,i,l){this.dialogRef=n,this.formBuilder=a,this.abmService=i,this.data=l,this.escuelas=[],this.elecciones=[],this.isUpdate=!1,this.mesa=l.mesa}loadData(){const n=new h.T,a=new C.y;this.abmService.getAllEntity(n).subscribe(i=>{this.escuelas=i.map(l=>Object.assign(new h.T,l))}),this.abmService.getAllEntity(a).subscribe(i=>{this.elecciones=i.map(l=>Object.assign(new C.y,l))})}ngOnInit(){this.loadData(),this.form=this.formBuilder.group({numeroMesa:["",r.kI.required],cantidad_votantes:["",r.kI.required],escuela_id:["",r.kI.required],eleccion_id:["",r.kI.required]}),this.mesa&&(this.isUpdate=!0,this.form.patchValue({...this.mesa}))}saveMesa(){if(this.form.valid)if(this.mesa){let n=Object.assign(new c.q,this.form.value);n.id=this.mesa.id,this.abmService.update(n).subscribe(a=>{p().fire({icon:"success",title:"Actualizaci\xf3n exitosa",text:"Los datos de la mesa han sido actualizados"}),this.dialogRef.close()})}else{let n=new c.q;n=Object.assign(new c.q,this.form.value),this.abmService.create(n).subscribe(a=>{p().fire({icon:"success",title:"Alta exitosa",text:`Se genero una nueva Mesa con ID = ${a.id}`}),this.dialogRef.close()})}}closeModal(n){n.stopPropagation(),n.preventDefault(),this.dialogRef.close()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(d.so),e.Y36(r.qu),e.Y36(b.I),e.Y36(d.WI))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-mesas-modal"]],decls:27,vars:11,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],["appearance","fill",1,"input-field"],["matInput","","placeholder","Nro de Mesa","formControlName","numeroMesa"],[4,"ngIf"],["matInput","","placeholder","Cantidad Votantes","formControlName","cantidad_votantes"],["formControlName","escuela_id",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","eleccion_id",3,"ngModel","ngModelChange"],[1,"button-container"],["mat-raised-button","","type","submit",1,"btn-guardar",3,"disabled"],["mat-button","",1,"btn-cerrar",3,"click"],[3,"value"]],template:function(n,a){1&n&&(e.TgZ(0,"mat-dialog-content",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return a.saveMesa()}),e.TgZ(4,"mat-form-field",2),e._UZ(5,"input",3),e.YNc(6,A,2,0,"mat-error",4),e.qZA(),e.TgZ(7,"mat-form-field",2),e._UZ(8,"input",5),e.YNc(9,P,2,0,"mat-error",4),e.qZA(),e.TgZ(10,"mat-form-field",2)(11,"mat-label"),e._uU(12,"Escuela"),e.qZA(),e.TgZ(13,"mat-select",6),e.NdJ("ngModelChange",function(l){return a.form.value.escuela_id=l}),e.YNc(14,U,2,2,"mat-option",7),e.qZA(),e.YNc(15,D,2,0,"mat-error",4),e.qZA(),e.TgZ(16,"mat-form-field",2)(17,"mat-label"),e._uU(18,"Eleccion"),e.qZA(),e.TgZ(19,"mat-select",8),e.NdJ("ngModelChange",function(l){return a.form.value.eleccion_id=l}),e.YNc(20,y,2,2,"mat-option",7),e.qZA(),e.YNc(21,N,2,0,"mat-error",4),e.qZA(),e.TgZ(22,"div",9)(23,"button",10),e._uU(24,"Guardar"),e.qZA(),e.TgZ(25,"button",11),e.NdJ("click",function(l){return a.closeModal(l)}),e._uU(26,"Cerrar"),e.qZA()()()()),2&n&&(e.xp6(2),e.Oqu(a.isUpdate?"Actualizar Mesa":"Agregar Mesa"),e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("ngIf",a.form.controls.numeroMesa.hasError("required")),e.xp6(3),e.Q6J("ngIf",a.form.controls.cantidad_votantes.hasError("required")),e.xp6(4),e.Q6J("ngModel",a.form.value.escuela_id),e.xp6(1),e.Q6J("ngForOf",a.escuelas),e.xp6(1),e.Q6J("ngIf",a.form.controls.escuela_id.hasError("required")),e.xp6(4),e.Q6J("ngModel",a.form.value.eleccion_id),e.xp6(1),e.Q6J("ngForOf",a.elecciones),e.xp6(1),e.Q6J("ngIf",a.form.controls.eleccion_id.hasError("required")),e.xp6(2),e.Q6J("disabled",a.form.invalid))},dependencies:[T.sg,T.O5,g.lW,d.xY,_.KE,_.hX,_.TO,v.Nt,E.gD,O.ey,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#c9cacf;color:#fff;padding:20px}.input-field[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-field[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{height:40px;padding:10px;border:none;border-radius:4px;background-color:#f2f2f2;font-size:16px;transition:background-color .3s ease}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .input-field[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]:focus{outline:none}.mat-form-field-appearance-fill.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:#c43f3f}.mat-error[_ngcontent-%COMP%]{color:red;font-size:14px;margin-top:4px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;width:150px}.btn-cerrar[_ngcontent-%COMP%]{background-color:#e91e63;color:#fff}.button-container[_ngcontent-%COMP%]   button.btn-guardar[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}\n\n/*# sourceMappingURL=mesas-modal.component.css.map*/"]}),t})();var q=o(9986),Y=o(6515),u=o(5299);function B(t,s){1&t&&(e.TgZ(0,"th",11),e._uU(1," Numero de Mesa "),e.qZA())}function J(t,s){if(1&t&&(e.TgZ(0,"td",12),e._uU(1),e.qZA()),2&t){const n=s.$implicit;e.xp6(1),e.hij(" ",n.numeroMesa," ")}}function R(t,s){1&t&&(e.TgZ(0,"th",11),e._uU(1," Escuela "),e.qZA())}function I(t,s){if(1&t&&(e.TgZ(0,"td",12),e._uU(1),e.qZA()),2&t){const n=s.$implicit;e.xp6(1),e.hij(" ",n.Escuela.nombre," ")}}function k(t,s){1&t&&(e.TgZ(0,"th",11),e._uU(1," Eleccion "),e.qZA())}function Q(t,s){if(1&t&&(e.TgZ(0,"td",12),e._uU(1),e.qZA()),2&t){const n=s.$implicit;e.xp6(1),e.hij(" ",n.Eleccion.nombre," ")}}function w(t,s){1&t&&(e.TgZ(0,"th",11),e._uU(1," Cant. Votantes "),e.qZA())}function S(t,s){if(1&t&&(e.TgZ(0,"td",12),e._uU(1),e.qZA()),2&t){const n=s.$implicit;e.xp6(1),e.hij(" ",n.cantidad_votantes," ")}}function $(t,s){1&t&&(e.TgZ(0,"th",11),e._uU(1," Acciones "),e.qZA())}function F(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"td",12)(1,"button",13),e.NdJ("click",function(){const l=e.CHM(n).$implicit,M=e.oxw();return e.KtG(M.abrirModalActualizar(l))}),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()(),e.TgZ(4,"button",14),e.NdJ("click",function(){const l=e.CHM(n).$implicit,M=e.oxw();return e.KtG(M.borrarEleccion(l))}),e.TgZ(5,"mat-icon"),e._uU(6,"delete"),e.qZA()()()}}function L(t,s){1&t&&e._UZ(0,"tr",15)}function j(t,s){1&t&&e._UZ(0,"tr",16)}let z=(()=>{class t{constructor(n,a,i){this.ambServices=n,this.dialog=a,this.setupService=i,this.mesas=[],this.displayedColumns=["numeroMesa","escuela","eleccion","cantidad_votantes","acciones"],this.e=null,this.e=this.setupService.eleccionSeleccionada.getValue()}ngOnInit(){this.loadData()}loadData(){const n=new c.q;this.ambServices.getAllEntity(n).subscribe(a=>{const i=a.map(l=>Object.assign(new c.q,l));this.mesas=i.filter(l=>l.Eleccion.id===this.e?.id)})}abrirModalAgregar(){this.dialog.open(x,{data:{mesa:void 0},width:"500px",panelClass:"custom-modal-background"}).afterClosed().subscribe(a=>{console.log("El modal se cerr\xf3"),this.loadData()})}abrirModalActualizar(n){this.dialog.open(x,{data:{mesa:n},width:"500px",panelClass:"custom-modal-background"}).afterClosed().subscribe(i=>{this.loadData(),console.log("Resultado del modal de actualizaci\xf3n:",i)})}borrarEleccion(n){p().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, borrar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&this.ambServices.delete(n).subscribe(i=>{p().fire({icon:"success",title:"Escuela borrada",text:"La mesa  ha sido borrada exitosamente"}),this.loadData()},i=>{p().fire({icon:"error",title:"Error al borrar escuela",text:"Ha ocurrido un error al borrar la mesa"}),console.log(i)})})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(b.I),e.Y36(d.uw),e.Y36(q.U))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-mesas"]],decls:21,vars:3,consts:[["mat-fab","","color","primary",1,"floating-button",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","numeroMesa"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","escuela"],["matColumnDef","eleccion"],["matColumnDef","cantidad_votantes"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,a){1&n&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return a.abrirModalAgregar()}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()(),e.TgZ(3,"table",1),e.ynx(4,2),e.YNc(5,B,2,0,"th",3),e.YNc(6,J,2,1,"td",4),e.BQk(),e.ynx(7,5),e.YNc(8,R,2,0,"th",3),e.YNc(9,I,2,1,"td",4),e.BQk(),e.ynx(10,6),e.YNc(11,k,2,0,"th",3),e.YNc(12,Q,2,1,"td",4),e.BQk(),e.ynx(13,7),e.YNc(14,w,2,0,"th",3),e.YNc(15,S,2,1,"td",4),e.BQk(),e.ynx(16,8),e.YNc(17,$,2,0,"th",3),e.YNc(18,F,7,0,"td",4),e.BQk(),e.YNc(19,L,1,0,"tr",9),e.YNc(20,j,1,0,"tr",10),e.qZA()),2&n&&(e.xp6(3),e.Q6J("dataSource",a.mesas),e.xp6(16),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns))},dependencies:[Y.Hw,g.RK,g.cs,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk],styles:[".custom-modal-background[_ngcontent-%COMP%]{background-color:#1a237e;background-image:linear-gradient(to bottom,#1a237e,#3949ab)}.floating-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;border-radius:50%;background-color:#4caf50;color:#fff}.floating-button[_ngcontent-%COMP%]:hover{background-color:#52e85a}\n\n/*# sourceMappingURL=mesas.component.css.map*/"]}),t})()},9765:(f,m,o)=>{o.d(m,{h:()=>r});var c=o(2061);class r extends c.e{getFilterText(){return`${this.nombre} ${this.apellido}`}constructor(){super()}get endPoint(){return"candidatos"}}},2962:(f,m,o)=>{o.d(m,{r:()=>r});var c=o(2061);class r extends c.e{constructor(){super()}get endPoint(){return"cargos"}getFilterText(){return this.nombre}}},4763:(f,m,o)=>{o.d(m,{Q:()=>r});var c=o(2061);class r extends c.e{getFilterText(){return`${this.nombre} ${this.apellido} ${this.dni}`}constructor(){super()}get endPoint(){return"companeros"}}},9460:(f,m,o)=>{o.d(m,{y:()=>r});var c=o(2061);class r extends c.e{static endURL(){return"elecciones"}constructor(){super()}get endPoint(){return"elecciones"}getFilterText(){return`${this.nombre} `}}},5136:(f,m,o)=>{o.d(m,{T:()=>r});var c=o(2061);class r extends c.e{constructor(){super(),this.MesaElectorals=[]}get endPoint(){return"escuelas"}getFilterText(){return`${this.nombre}`}}},229:(f,m,o)=>{o.d(m,{D:()=>r});var c=o(2061);class r extends c.e{getFilterText(){return`${this.nombre} `}constructor(){super()}get endPoint(){return"partidos"}}}}]);
//# sourceMappingURL=941.2171928f006ce129.js.map